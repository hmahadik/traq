[
  {
    "category": "functional",
    "description": "NEW: Backend - Categorization rules table exists in database",
    "steps": [
      "Step 1: Connect to SQLite database at ~/.local/share/traq/data.db",
      "Step 2: Query schema for app_categorization_rules table",
      "Step 3: Verify table has columns: id, app_name, category, is_system_default, created_at",
      "Step 4: Verify table is created successfully"
    ],
    "passes": true
  },
  {
    "category": "functional",
    "description": "NEW: Backend - Default categorization rules are seeded",
    "steps": [
      "Step 1: Navigate to Timeline page in running app",
      "Step 2: Open browser dev tools and check network requests",
      "Step 3: Verify GetTimelineGridData returns Categories map",
      "Step 4: Check that common apps (VS Code, Zoom, Slack) have appropriate categories"
    ],
    "passes": true
  },
  {
    "category": "functional",
    "description": "NEW: Backend - GetTimelineGridData endpoint returns grid data structure",
    "steps": [
      "Step 1: Start the app with init.sh",
      "Step 2: Navigate to Timeline page",
      "Step 3: Open browser dev tools console",
      "Step 4: Execute window.runtime.GetTimelineGridData(new Date().toISOString().split('T')[0])",
      "Step 5: Verify response contains: Date, DayStats, TopApps, HourlyGrid, SessionSummaries, Categories"
    ],
    "passes": true
  },
  {
    "category": "functional",
    "description": "NEW: Frontend - useTimelineGridData hook fetches and caches grid data",
    "steps": [
      "Step 1: Navigate to Timeline page",
      "Step 2: Open React DevTools",
      "Step 3: Verify useTimelineGridData hook is present in component tree",
      "Step 4: Check that React Query cache contains 'timeline.grid' query with date key",
      "Step 5: Verify data structure matches TimelineGridData type"
    ],
    "passes": true
  },
  {
    "category": "functional",
    "description": "NEW: Timeline Grid View - Hour column displays with correct hour markers",
    "steps": [
      "Step 1: Navigate to Timeline page for a day with activity",
      "Step 2: Verify left sticky column shows hour markers (e.g., 8 AM, 9 AM, 10 AM)",
      "Step 3: Verify each hour block is 60px tall",
      "Step 4: Verify only active hours plus 1 hour buffer are shown",
      "Step 5: Verify hour column remains sticky when scrolling horizontally"
    ],
    "passes": true
  },
  {
    "category": "functional",
    "description": "NEW: Timeline Grid View - App columns render for top apps with correct headers",
    "steps": [
      "Step 1: Navigate to Timeline page with activity",
      "Step 2: Verify app columns appear after the AI Summary column",
      "Step 3: Check that each app column shows: app icon, app name, total duration",
      "Step 4: Verify columns are 140px wide",
      "Step 5: Verify top 6 apps by duration are displayed"
    ],
    "passes": true
  },
  {
    "category": "functional",
    "description": "NEW: Timeline Grid View - Activity blocks positioned correctly within app columns",
    "steps": [
      "Step 1: Navigate to Timeline page with activity",
      "Step 2: Identify an activity block in an app column",
      "Step 3: Check that block vertical position matches the actual start time",
      "Step 4: Verify block height corresponds to activity duration",
      "Step 5: Hover over block and verify tooltip shows window title, duration, and time"
    ],
    "passes": true
  },
  {
    "category": "functional",
    "description": "NEW: Timeline Grid View - AI Summary column shows session summaries at correct times",
    "steps": [
      "Step 1: Navigate to Timeline page with sessions",
      "Step 2: Locate the AI Summary column (sticky, after hour column)",
      "Step 3: Verify session summary blocks appear at correct vertical positions",
      "Step 4: Check that summary blocks have colored left borders based on category (focus=green, meetings=red, comms=purple)",
      "Step 5: Verify summary text and time range are displayed"
    ],
    "passes": true
  },
  {
    "category": "functional",
    "description": "NEW: Timeline Grid View - Multi-hour sessions span across hour boundaries",
    "steps": [
      "Step 1: Find or create a session spanning multiple hours (e.g., 9:00-11:30)",
      "Step 2: Navigate to Timeline page for that date",
      "Step 3: Verify the session summary block spans vertically across all hours",
      "Step 4: Check that the block height extends from start time to end time correctly"
    ],
    "passes": true
  },
  {
    "category": "functional",
    "description": "NEW: Sidebar - Daily Summary Card displays total hours and key metrics",
    "steps": [
      "Step 1: Navigate to Timeline page with activity",
      "Step 2: Locate the left sidebar Daily Summary Card",
      "Step 3: Verify large hero number shows total hours tracked",
      "Step 4: Verify stats rows show: day span, breaks, longest focus session",
      "Step 5: Check that gradient text styling is applied"
    ],
    "passes": true
  },
  {
    "category": "functional",
    "description": "NEW: Sidebar - Breakdown bar shows categorized time distribution",
    "steps": [
      "Step 1: Navigate to Timeline page with activity",
      "Step 2: Locate the breakdown bar in left sidebar",
      "Step 3: Verify bar segments appear for: focus (green), meetings (blue), comms (purple), other (gray)",
      "Step 4: Verify legend shows category labels with durations",
      "Step 5: Check that segment widths are proportional to time spent"
    ],
    "passes": true
  },
  {
    "category": "functional",
    "description": "NEW: Sidebar - Top Apps section lists apps with icons and durations",
    "steps": [
      "Step 1: Navigate to Timeline page with activity",
      "Step 2: Locate Top Apps section in left sidebar",
      "Step 3: Verify list shows top apps with icons",
      "Step 4: Verify each app shows name and total duration",
      "Step 5: Check that apps are ordered by duration (highest first)"
    ],
    "passes": true
  },
  {
    "category": "functional",
    "description": "NEW: Timeline Header - Date navigation works correctly",
    "steps": [
      "Step 1: Navigate to Timeline page",
      "Step 2: Click 'Previous Day' button",
      "Step 3: Verify date updates and grid data refreshes",
      "Step 4: Click 'Next Day' button",
      "Step 5: Verify date updates correctly",
      "Step 6: Click 'Today' button and verify current date is selected"
    ],
    "passes": true
  },
  {
    "category": "functional",
    "description": "NEW: Timeline Header - Total time displays in header",
    "steps": [
      "Step 1: Navigate to Timeline page with activity",
      "Step 2: Locate the header section",
      "Step 3: Verify total time for the day is displayed prominently",
      "Step 4: Verify format matches existing time formatting (e.g., '7.5h' or '7h 30m')"
    ],
    "passes": true
  },
  {
    "category": "functional",
    "description": "NEW: Horizontal scroll works smoothly with many app columns",
    "steps": [
      "Step 1: Navigate to Timeline page with 6+ active apps",
      "Step 2: Scroll horizontally through app columns",
      "Step 3: Verify Hour column and AI Summary column remain sticky",
      "Step 4: Verify smooth scrolling performance",
      "Step 5: Verify all app columns are accessible via scroll"
    ],
    "passes": true
  },
  {
    "category": "functional",
    "description": "NEW: Activity block tooltips show full details on hover",
    "steps": [
      "Step 1: Navigate to Timeline page with activity",
      "Step 2: Hover over an activity block in an app column",
      "Step 3: Verify tooltip appears with: window title, duration, start time, end time",
      "Step 4: Verify tooltip positioning is correct and readable",
      "Step 5: Move mouse away and verify tooltip disappears"
    ],
    "passes": true
  },
  {
    "category": "functional",
    "description": "NEW: Empty hours show diagonal line pattern",
    "steps": [
      "Step 1: Navigate to Timeline page",
      "Step 2: Locate an hour block with no activity",
      "Step 3: Verify empty hour blocks show diagonal line pattern (CSS gradient)",
      "Step 4: Verify pattern is consistent across all empty hours"
    ],
    "passes": true
  },
  {
    "category": "functional",
    "description": "NEW: Very short activities (<1min) are visible with minimum height",
    "steps": [
      "Step 1: Find or create a very short activity (under 1 minute)",
      "Step 2: Navigate to Timeline page for that date",
      "Step 3: Verify the activity block is visible (min 4px height)",
      "Step 4: Hover and verify tooltip shows correct short duration"
    ],
    "passes": true
  },
  {
    "category": "functional",
    "description": "NEW: Empty day shows appropriate empty state message",
    "steps": [
      "Step 1: Navigate to Timeline page for a date with no activity",
      "Step 2: Verify empty state message is displayed",
      "Step 3: Check that message is clear and helpful",
      "Step 4: Verify sidebar still shows but with zero values"
    ],
    "passes": true
  },
  {
    "category": "functional",
    "description": "NEW: Categorization settings UI allows viewing rules",
    "steps": [
      "Step 1: Navigate to Settings page or open categorization modal",
      "Step 2: Locate categorization rules section",
      "Step 3: Verify list of existing rules is displayed",
      "Step 4: Check that each rule shows: app name, category"
    ],
    "passes": false
  },
  {
    "category": "functional",
    "description": "NEW: Categorization settings UI allows adding new rules",
    "steps": [
      "Step 1: Open categorization settings",
      "Step 2: Click 'Add Rule' button",
      "Step 3: Enter app name (e.g., 'Firefox') and select category (e.g., 'other')",
      "Step 4: Save the rule",
      "Step 5: Verify rule appears in the list",
      "Step 6: Navigate to Timeline and verify Firefox activities use new category color"
    ],
    "passes": false
  },
  {
    "category": "functional",
    "description": "NEW: Categorization settings UI allows editing existing rules",
    "steps": [
      "Step 1: Open categorization settings",
      "Step 2: Select an existing rule",
      "Step 3: Click 'Edit' button",
      "Step 4: Change the category (e.g., from 'focus' to 'comms')",
      "Step 5: Save changes",
      "Step 6: Verify rule is updated in the list",
      "Step 7: Navigate to Timeline and verify category change is reflected"
    ],
    "passes": false
  },
  {
    "category": "functional",
    "description": "NEW: Categorization settings UI allows deleting rules",
    "steps": [
      "Step 1: Open categorization settings",
      "Step 2: Select an existing rule",
      "Step 3: Click 'Delete' button",
      "Step 4: Confirm deletion",
      "Step 5: Verify rule is removed from the list",
      "Step 6: Verify app falls back to default category"
    ],
    "passes": false
  },
  {
    "category": "style",
    "description": "NEW: Timeline Grid View matches reference design layout",
    "steps": [
      "Step 1: Navigate to Timeline page",
      "Step 2: Take screenshot",
      "Step 3: Compare with reference at screenshots/references/traq-timeline-v3.html",
      "Step 4: Verify layout matches: left sidebar + main grid area",
      "Step 5: Verify hour column width ~50px, summary column ~160px, app columns ~140px"
    ],
    "passes": true
  },
  {
    "category": "style",
    "description": "NEW: Activity blocks have gradient backgrounds matching design",
    "steps": [
      "Step 1: Navigate to Timeline page with activity",
      "Step 2: Take close-up screenshot of activity blocks",
      "Step 3: Verify blocks have subtle gradient backgrounds",
      "Step 4: Verify category colors are applied correctly",
      "Step 5: Check that blocks have appropriate border radius and shadows"
    ],
    "passes": true
  },
  {
    "category": "style",
    "description": "NEW: Daily Summary Card has hero gradient text styling",
    "steps": [
      "Step 1: Navigate to Timeline page",
      "Step 2: Take screenshot of Daily Summary Card in sidebar",
      "Step 3: Verify large hour number has gradient text effect",
      "Step 4: Verify card styling matches design (background, padding, borders)"
    ],
    "passes": true
  },
  {
    "category": "style",
    "description": "NEW: Breakdown bar segments have correct colors and styling",
    "steps": [
      "Step 1: Navigate to Timeline page with activity",
      "Step 2: Take screenshot of breakdown bar",
      "Step 3: Verify segment colors: focus=green, meetings=blue, comms=purple, other=gray",
      "Step 4: Verify smooth transitions between segments",
      "Step 5: Verify legend styling is clear and readable"
    ],
    "passes": true
  },
  {
    "category": "style",
    "description": "NEW: Timeline Grid scrolls smoothly with sticky columns",
    "steps": [
      "Step 1: Navigate to Timeline page with multiple app columns",
      "Step 2: Record horizontal scroll interaction",
      "Step 3: Verify Hour and AI Summary columns remain fixed on left",
      "Step 4: Verify app columns scroll smoothly",
      "Step 5: Check for visual glitches or alignment issues during scroll"
    ],
    "passes": true
  },
  {
    "category": "style",
    "description": "NEW: Responsive layout works on different window sizes",
    "steps": [
      "Step 1: Navigate to Timeline page",
      "Step 2: Resize window to narrow width (~1200px)",
      "Step 3: Verify sidebar remains visible or collapses gracefully",
      "Step 4: Verify grid scrolls horizontally without breaking",
      "Step 5: Test at wide width (~1920px) and verify layout uses space well"
    ],
    "passes": true
  },
  {
    "category": "style",
    "description": "NEW: Loading states show skeletons for grid components",
    "steps": [
      "Step 1: Navigate to Timeline page",
      "Step 2: Refresh and observe loading state",
      "Step 3: Verify skeleton loaders appear for sidebar and grid",
      "Step 4: Verify skeletons match final layout structure",
      "Step 5: Verify smooth transition from loading to loaded state"
    ],
    "passes": false
  },
  {
    "category": "functional",
    "description": "NEW: Grid data accuracy - Total time matches sum of activities",
    "steps": [
      "Step 1: Navigate to Timeline page with activity",
      "Step 2: Note total time displayed in header/sidebar",
      "Step 3: Manually sum all activity block durations (use tooltips)",
      "Step 4: Verify totals match within reasonable margin (\u00b11 minute)",
      "Step 5: Check that breakdown percentages add up to 100%"
    ],
    "passes": true
  },
  {
    "category": "functional",
    "description": "NEW: Session without AI summary shows placeholder",
    "steps": [
      "Step 1: Find or create a session without an AI-generated summary",
      "Step 2: Navigate to Timeline page for that date",
      "Step 3: Locate the session block in AI Summary column",
      "Step 4: Verify placeholder text like '(No summary)' is displayed",
      "Step 5: Verify block still shows time range correctly"
    ],
    "passes": true
  }
]